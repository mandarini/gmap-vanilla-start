"use strict";!function r(l,s,i){function c(t,e){if(!s[t]){if(!l[t]){var o="function"==typeof require&&require;if(!e&&o)return o(t,!0);if(p)return p(t,!0);var a=new Error("Cannot find module '"+t+"'");throw a.code="MODULE_NOT_FOUND",a}var n=s[t]={exports:{}};l[t][0].call(n.exports,function(e){return c(l[t][1][e]||e)},n,n.exports,r,l,s,i)}return s[t].exports}for(var p="function"==typeof require&&require,e=0;e<i.length;e++)c(i[e]);return c}({1:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var a=e("./map"),n=e("./drawing");o.loadAllDrawingButtons=function(){l.forEach(function(e){!function(t,e,o){var a=document.createElement("img");a.id="".concat(t.name,"-control"),a.tabIndex=0,a.setAttribute("role","button"),"clear"===o?(a.src="assets/img/".concat(t.img,".svg"),a.addEventListener("click",function(e){n.clearAll()})):(a.src="assets/img/".concat(t.img,".png"),a.addEventListener("click",function(e){n.draw(t.name)}));e.appendChild(a)}(e,r,"clear"===e.name?"clear":"draw")})},o.listenersForControlButtons=function(){document.getElementById("city-lon").addEventListener("click",function(e){a.city("lon")}),document.getElementById("city-man").addEventListener("click",function(e){a.city("man")}),document.getElementById("masts-toggle").addEventListener("click",function(e){a.toggleMasts()}),document.getElementById("cluster-toggle").addEventListener("click",function(e){a.toggleClusters()}),document.getElementById("heatmap-toggle").addEventListener("click",function(e){a.toggleHeatmap()}),document.getElementById("heatmap-range").addEventListener("change",function(e){var t=e.target;a.changeHeatmapRadius(parseInt(t.value))}),document.getElementById("cluster-range").addEventListener("change",function(e){var t=e.target;a.changeCluster(parseInt(t.value))})};var r=document.getElementById("drawingControls"),l=[{name:"marker",img:"point"},{name:"polygon",img:"polygon"},{name:"square",img:"square"},{name:"circle",img:"circle"},{name:"polyline",img:"line"},{name:"cat",img:"cat"},{name:"pan",img:"pan"},{name:"save",img:"save"},{name:"clear",img:"clear"}]},{"./drawing":3,"./map":6}],2:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.directionCalculator=function(e){var t=new google.maps.DirectionsService,o=new google.maps.DirectionsRenderer;function a(){!function(e,o,a,n,r){n.value&&0<n.value.length&&r.value&&0<r.value.length&&e.route({origin:{query:n.value},destination:{query:r.value},travelMode:google.maps.TravelMode.DRIVING},function(e,t){"OK"===t?(o.setDirections(e),a.getDistanceMatrix({origins:[n.value],destinations:[r.value],travelMode:google.maps.TravelMode.DRIVING,unitSystem:google.maps.UnitSystem.METRIC},function(e,t){"OK"!==t?alert("Error was: "+t):document.getElementById("distance").textContent=e.rows[0].elements[0].distance.text+" "+e.rows[0].elements[0].duration.text})):window.alert("Directions request failed due to "+t)})}(t,o,n,r,l)}o.setMap(e);var n=new google.maps.DistanceMatrixService,r=document.getElementById("origin"),l=document.getElementById("destination"),s=new google.maps.places.Autocomplete(r),i=new google.maps.places.Autocomplete(l);s.setFields(["address_components","geometry","icon","name"]),i.setFields(["address_components","geometry","icon","name"]),s.addListener("place_changed",function(){var e=s.getPlace();a(),e.geometry||window.alert("No details available for input: '"+e.name+"'")}),i.addListener("place_changed",function(){var e=i.getPlace();a(),e.geometry||window.alert("No details available for input: '"+e.name+"'")})}},{}],3:[function(e,t,o){var n,r;Object.defineProperty(o,"__esModule",{value:!0});var l=[];o.listenForDrawing=function(a){(n=new google.maps.drawing.DrawingManager({drawingMode:null,drawingControl:!1})).setMap(a),r=new google.maps.Data,n.addListener("overlaycomplete",function(e){switch(l.push(e.overlay),e.overlay.addListener("rightclick",function(){e.overlay.setMap(null)}),e.type){case"polygon":r.add(new google.maps.Data.Feature({geometry:new google.maps.Data.Polygon([e.overlay.getPath().getArray()])})),a.data.add(new google.maps.Data.Feature({geometry:new google.maps.Data.Polygon([e.overlay.getPath().getArray()])}));break;case"rectangle":var t=e.overlay.getBounds(),o=[t.getSouthWest(),{lat:t.getSouthWest().lat(),lng:t.getNorthEast().lng()},t.getNorthEast(),{lng:t.getSouthWest().lng(),lat:t.getNorthEast().lat()}];r.add(new google.maps.Data.Feature({geometry:new google.maps.Data.Polygon([o])})),a.data.add(new google.maps.Data.Feature({geometry:new google.maps.Data.Polygon([o])}));break;case"polyline":r.add(new google.maps.Data.Feature({geometry:new google.maps.Data.LineString(e.overlay.getPath().getArray())})),a.data.add(new google.maps.Data.Feature({geometry:new google.maps.Data.LineString(e.overlay.getPath().getArray())}));break;case"circle":r.add(new google.maps.Data.Feature({properties:{radius:e.overlay.getRadius()},geometry:new google.maps.Data.Point(e.overlay.getCenter())})),a.data.add(new google.maps.Data.Feature({properties:{radius:e.overlay.getRadius()}}));break;case"marker":r.add(new google.maps.Data.Feature({geometry:new google.maps.Data.Point(e.overlay.getPosition())}));break;default:console.log("end")}})},o.draw=function(e){switch(e){case"marker":n.setDrawingMode(google.maps.drawing.OverlayType.MARKER);var t={url:"assets/img/point.png",scaledSize:new google.maps.Size(30,30)};n.setOptions({markerOptions:{icon:t,clickable:!0,draggable:!0}});break;case"cat":n.setDrawingMode(google.maps.drawing.OverlayType.MARKER);var o={url:"assets/img/cat.png",scaledSize:new google.maps.Size(70,70)};n.setOptions({markerOptions:{icon:o,clickable:!0,draggable:!0}});break;case"polygon":n.setDrawingMode(google.maps.drawing.OverlayType.POLYGON),n.setOptions({polygonOptions:{fillColor:"#9c4d4f",fillOpacity:.5,strokeWeight:2,strokeColor:"#401619",clickable:!0,editable:!0,draggable:!0}});break;case"square":n.setDrawingMode(google.maps.drawing.OverlayType.RECTANGLE),n.setOptions({rectangleOptions:{fillColor:"#fff82e",fillOpacity:.5,strokeWeight:2,strokeColor:"#c8a535",clickable:!0,editable:!0,draggable:!0}});break;case"polyline":n.setDrawingMode(google.maps.drawing.OverlayType.POLYLINE),n.setOptions({polylineOptions:{strokeWeight:2,strokeColor:"#00b801",clickable:!0,editable:!0,draggable:!0}});break;case"circle":n.setDrawingMode(google.maps.drawing.OverlayType.CIRCLE),n.setOptions({circleOptions:{fillColor:"#00b801",fillOpacity:.5,strokeWeight:2,strokeColor:"#00b801",clickable:!0,editable:!0,draggable:!0}});break;case"pan":n.setDrawingMode(null);break;case"save":n.setDrawingMode(null),r.toGeoJson(function(e){console.log(e),function(e,t){var o=document.createElement("a"),a=new Blob([e],{type:"text/plain"});o.href=URL.createObjectURL(a),o.download=t,o.click()}(JSON.stringify(e),"drawingData.txt")});break;default:n.setDrawingMode(null)}},o.clearAll=function(){l.map(function(e){e.setMap(null)}),r.setMap(null),r=new google.maps.Data,l=[]}},{}],4:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.customGradient=["rgba(209, 110, 250, 0)","rgb(180, 125, 255)","rgb(146, 138, 255)","rgb(105, 149, 255)","rgb(37, 158, 255)","rgb(0, 166, 255)","rgb(0, 172, 255)","rgb(0, 177, 255)","rgb(0, 181, 255)","rgb(0, 185, 244)","rgb(0, 187, 230)","rgb(0, 189, 216)","rgb(0, 190, 202)","rgb(0, 191, 188)","rgb(0, 191, 175)"]},{}],5:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var a,n=e("./mapscript"),r=e("./clickListeners"),l=e("./map");function s(){a=new google.maps.Map(document.getElementById("map"),{zoom:11,scrollwheel:!0,panControl:!1,mapTypeControl:!0,mapTypeControlOptions:{position:google.maps.ControlPosition.TOP_LEFT},zoomControl:!0,streetViewControl:!1,scaleControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE,position:google.maps.ControlPosition.RIGHT_BOTTOM}}),l.FunWithMaps(a)}r.loadAllDrawingButtons(),r.listenersForControlButtons(),window.google&&window.google.maps?s():n.loadMapScript("geometry,drawing,visualization,places",function(e){s()})},{"./clickListeners":1,"./map":6,"./mapscript":8}],6:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0});var i,c,p,a,g,m,y=e("./styledMap"),d=e("./myCustomStyle"),u=e("./drawing"),f=e("./placesSearch"),T=e("./directions"),v=e("./gradient"),b=e("./mapNumber"),n=!0,w=[],r=!1,l=!1,s=!1;function h(e,t){return new google.maps.LatLng(e,t)}o.FunWithMaps=function(e){i=e,c=h(51.561638,-.14);var t=new google.maps.StyledMapType(y.styledMap,{name:"Dark Map"}),o=new google.maps.StyledMapType(d.myCustomStyle,{name:"Katerina's style"});e.setCenter(c),e.mapTypes.set("dark_map",t),e.mapTypes.set("my_custom_style",o),e.setMapTypeId("dark_map"),e.setOptions({mapTypeControlOptions:{mapTypeIds:["roadmap","terrain","dark_map","my_custom_style"]}});var a=document.getElementById("controls"),n=document.getElementById("legend"),r=document.getElementById("drawingControls"),l=document.getElementById("katlink"),s=document.getElementById("place-search");e.controls[google.maps.ControlPosition.LEFT_TOP].push(a),e.controls[google.maps.ControlPosition.LEFT_BOTTOM].push(n),e.controls[google.maps.ControlPosition.TOP_RIGHT].push(r),e.controls[google.maps.ControlPosition.RIGHT_BOTTOM].push(l),e.controls[google.maps.ControlPosition.TOP_CENTER].push(s),T.directionCalculator(e),f.placesSearch(e),u.listenForDrawing(e),function(a){var n={url:"assets/img/antennabl.png",scaledSize:new google.maps.Size(40,40)};fetch("assets/data/masts.json").then(function(e){return e.json()}).then(function(e){e.data.map(function(t){var o=new google.maps.Marker({position:new google.maps.LatLng(parseFloat(t[18]),parseFloat(t[17])),icon:n});p=new google.maps.InfoWindow,o.addListener("click",function(e){p.setPosition(e.latLng),p.setContent("<p>".concat(t[14],"</p>")),p.open(a,o)}),w.push(o)})}).catch(function(e){console.log(e,"Error loading asset")})}(e),fetch("assets/data/letting.json").then(function(e){return e.json()}).then(function(e){m=e.data;var t=[];m.map(function(e){e[24]&&e[23]&&t.push({location:new google.maps.LatLng(parseFloat(e[24]),parseFloat(e[23])),weight:parseInt(e[15],10)})}),(g=new google.maps.visualization.HeatmapLayer({data:t})).set("gradient",v.customGradient),g.set("radius",40),g.set("opacity",.6)}).catch(function(e){console.log(e)}),function(t){t.data.loadGeoJson("assets/data/lonely.geojson"),t.data.setStyle(function(e){var t=e.getProperty("PREVALENCE"),o=255-Math.round(b.mapNumber(t,0,5,0,255));return{fillColor:"rgb("+o+","+o+",0)",strokeWeight:1}}),p=new google.maps.InfoWindow,t.data.addListener("click",function(e){p.setPosition(e.latLng),p.setContent("<p>The prevalence of loneliness is: \n    ".concat(e.feature.getProperty("PREVALENCE"),"</p>")),p.open(t)})}(e)},o.city=function(e){"lon"===e&&i.setCenter(h(51.561638,-.14)),"man"===e&&i.setCenter(h(53.52476717517185,-2.5434842249308414))},o.changeType=function(){n?i.setMapTypeId("roadmap"):i.setMapTypeId("dark_map"),n=!n},o.toggleMasts=function(){console.log("Toggled"),r?w.map(function(e){e.setMap(null)}):w.map(function(e){e.setMap(i)}),r=!r},o.toggleClusters=function(){l?a.clearMarkers():(a=new MarkerClusterer(i,w,{imagePath:"assets/img/m"})).setGridSize(10),l=!l},o.toggleHeatmap=function(){s?g.setMap(null):g.setMap(i),s=!s},o.changeHeatmapRadius=function(e){g.set("radius",e)},o.changeCluster=function(e){l=!0,a&&a.clearMarkers(),(a=new MarkerClusterer(i,w,{imagePath:"assets/img/m"})).setGridSize(e)}},{"./directions":2,"./drawing":3,"./gradient":4,"./mapNumber":7,"./myCustomStyle":9,"./placesSearch":10,"./styledMap":11}],7:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.mapNumber=function(e,t,o,a,n){return(e-t)*(n-a)/(o-t)+a}},{}],8:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.loadMapScript=function(e,t){if(!document.getElementById("gmap")){var o=document.createElement("script");o.type="text/javascript",o.src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDuMnM4W0JCUyNydC9n3Y_NuXSOdJG4np4",e&&0<e.length&&(o.src=o.src+"&libraries="+e),o.id="gmap",o.addEventListener("load",function(e){t(e)},!1),document.body.appendChild(o)}}},{}],9:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.myCustomStyle=[{elementType:"geometry",stylers:[{color:"#212121"}]},{elementType:"labels",stylers:[{visibility:"off"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{elementType:"labels.text.stroke",stylers:[{color:"#212121"}]},{featureType:"administrative",elementType:"geometry",stylers:[{color:"#757575"}]},{featureType:"administrative.country",elementType:"geometry.fill",stylers:[{color:"#f8d572"}]},{featureType:"administrative.country",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"administrative.land_parcel",stylers:[{visibility:"off"}]},{featureType:"administrative.locality",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"administrative.neighborhood",stylers:[{visibility:"off"}]},{featureType:"landscape.man_made",elementType:"geometry.fill",stylers:[{color:"#ffaabc"}]},{featureType:"landscape.natural",elementType:"geometry.fill",stylers:[{color:"#8c88fa"}]},{featureType:"landscape.natural.landcover",stylers:[{color:"#8c88fa"}]},{featureType:"landscape.natural.landcover",elementType:"geometry.fill",stylers:[{color:"#ccc8ff"}]},{featureType:"landscape.natural.terrain",stylers:[{color:"#8c88fa"}]},{featureType:"landscape.natural.terrain",elementType:"geometry.fill",stylers:[{color:"#bcacff"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#181818"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"poi.park",elementType:"labels.text.stroke",stylers:[{color:"#1b1b1b"}]},{featureType:"road",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry.fill",stylers:[{color:"#2c2c2c"}]},{featureType:"road",elementType:"labels.text.fill",stylers:[{color:"#8a8a8a"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#373737"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#3c3c3c"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#4e4e4e"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"transit",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#000000"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#ffe4f1"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#3d3d3d"}]}]},{}],10:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.placesSearch=function(l){var e=document.getElementById("place-input"),s=new google.maps.places.Autocomplete(e);s.bindTo("bounds",l),s.setFields(["address_components","geometry","icon","name"]);var i=new google.maps.Marker({map:l,anchorPoint:new google.maps.Point(0,-29)});s.addListener("place_changed",function(){i.setVisible(!1);var e=s.getPlace();if(e.geometry){e.geometry.viewport?l.fitBounds(e.geometry.viewport):(l.setCenter(e.geometry.location),l.setZoom(17)),i.setPosition(e.geometry.location),i.setVisible(!0);var t=new google.maps.InfoWindow,o=document.getElementById("infowindow-content");t.setContent(o);var a="";e.address_components&&(a=[e.address_components[0]&&e.address_components[0].short_name||"",e.address_components[1]&&e.address_components[1].short_name||"",e.address_components[2]&&e.address_components[2].short_name||""].join(" "));var n=e.opening_hours?e.opening_hours.open_now:"",r=e.rating?e.rating.toString():"";document.getElementById("place-icon").src=e.icon,document.getElementById("place-name").textContent=e.name,document.getElementById("place-address").textContent=a,document.getElementById("opening-hours").textContent=n?"Open Now":"Closed",document.getElementById("rating").textContent=r,t.open(l,i)}else window.alert("No details available for input: '"+e.name+"'")}),document.getElementById("use-strict-bounds").addEventListener("change",function(e){var t=e.target;s.setOptions({strictBounds:t.checked})})}},{}],11:[function(e,t,o){Object.defineProperty(o,"__esModule",{value:!0}),o.styledMap=[{elementType:"geometry",stylers:[{color:"#9a9a9a"}]},{elementType:"labels.text.fill",stylers:[{color:"#111111"}]},{elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"administrative",elementType:"geometry.stroke",stylers:[{color:"#c8c8c8"}]},{featureType:"administrative.land_parcel",elementType:"geometry.stroke",stylers:[{color:"#c8c8c8"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#c8c8c8"}]},{featureType:"landscape.natural",elementType:"geometry",stylers:[{color:"#c8c8c8"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#c8c8c8"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#111111"},{visibility:"simplified"}]},{featureType:"poi.park",elementType:"geometry.fill",stylers:[{color:"#c8c8c8"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#111111"}]},{featureType:"poi.business",stylers:[{visibility:"off"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#aaaaaa"}]},{featureType:"road.arterial",elementType:"geometry",stylers:[{color:"#999999"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#999999"}]},{featureType:"road.highway",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.highway.controlled_access",elementType:"geometry",stylers:[{color:"#444444"}]},{featureType:"road.highway.controlled_access",elementType:"geometry.stroke",stylers:[{visibility:"off"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#111111"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#c8c8c8"}]},{featureType:"transit.line",elementType:"labels.text.fill",stylers:[{color:"#111111"}]},{featureType:"transit.line",elementType:"labels.text.stroke",stylers:[{visibility:"off"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#c8c8c8"}]},{featureType:"water",elementType:"geometry.fill",stylers:[{color:"#222222"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#222222"}]}]},{}]},{},[5]);
//# sourceMappingURL=bundle.js.map
